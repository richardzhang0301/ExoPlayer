
//######################################################################################################################

// Â© 2016 Hear360

//######################################################################################################################

#ifdef __SSE2__
  #define USESSE2 1
#endif

#ifdef _MSC_VER
  #if (defined (_M_X64) || (defined (_M_IX86) && (_M_IX86_FP >= 2)))
    #ifndef USESSE2
      #define USESSE2 1
    #endif
  #endif
#endif

#ifdef USESSE2
  #include <xmmintrin.h>
  #include <pmmintrin.h>
#endif

//######################################################################################################################

namespace hear360_dsp_os_subnormal
{

//######################################################################################################################

void DisableSubnormals (void)
{
  #ifdef USESSE2

    _mm_setcsr (_mm_getcsr() | _MM_MASK_UNDERFLOW | _MM_FLUSH_ZERO_ON | _MM_DENORMALS_ZERO_ON);

  #endif

  return;
}

//######################################################################################################################

} // namespace

//######################################################################################################################
